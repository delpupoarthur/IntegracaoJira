<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>skyhook</title>
    <link
      rel="stylesheet"
      href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500">
    <link rel="stylesheet" type="text/css" href="style.css">
  </head>
  <main>
    <body class="mdc-typography">
      <div class="mdc-toolbar mdc-toolbar--fixed">
        <section class="mdc-toolbar__section mdc-toolbar__section--align-start">
          <span class="mdc-toolbar__title">skyhook</span>
        </section>
      </div>
      <div class="mdc-card demo-card">
        <form action="#" id="greeting-form">
          <div>
            <div class="mdc-form-field">
              <div class="mdc-textfield" data-mdc-auto-init="MDCTextfield">
                <input id="url" type="text" class="mdc-textfield__input">
                <label for="url" class="mdc-textfield__label">
                Discord Webhook URL
                </label>
              </div>
            </div>
          </div>
          <section>
            <p>Provider</p>
            <div class="mdc-form-field">
              <div class="mdc-radio">
                <input class="mdc-radio__native-control" type="radio" id="ex2-radio1" checked name="ex2">
                <div class="mdc-radio__background">
                  <div class="mdc-radio__outer-circle"></div>
                  <div class="mdc-radio__inner-circle"></div>
                </div>
              </div>
              <label id="ex2-radio1-label" for="ex2-radio1">GitLab</label>
            </div>
            <div class="mdc-form-field">
              <div class="mdc-radio">
                <input class="mdc-radio__native-control" type="radio" id="ex2-radio2" name="ex2">
                <div class="mdc-radio__background">
                  <div class="mdc-radio__outer-circle"></div>
                  <div class="mdc-radio__inner-circle"></div>
                </div>
              </div>
              <label id="ex2-radio2-label" for="ex2-radio2">AppVeyor</label>
            </div>
          </section>
          <br />
          <button type="submit"
            class="mdc-button
            mdc-button--raised
            mdc-button--primary
            mdc-ripple-surface"
            data-mdc-auto-init="MDCRipple">
          Generate
          </button>
        </form>
        <!-- The p element below is where we'll eventually output our greeting -->
        <p id="greeting"></p>
        <div id="mdc-js-snackbar"
          class="mdc-snackbar"
          aria-live="assertive"
          aria-atomic="true"
          aria-hidden="true">
          <div class="mdc-snackbar__text"></div>
          <div class="mdc-snackbar__action-wrapper">
            <button type="button" class="mdc-button mdc-snackbar__action-button"></button>
          </div>
        </div>
      </div>
    </body>
  </main>
  <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
  <script src="https://wzrd.in/standalone/copy-to-clipboard@latest" async></script>
  <script>
    window.mdc.autoInit();
    
    (function(global) {
        'use strict';
      
        var MDCSnackbar = global.mdc.snackbar.MDCSnackbar;
        var snackbar = new MDCSnackbar(document.getElementById('mdc-js-snackbar'));
      
        var show = function(sb) {
            var data =  {
              message: "URL Generated. Copied to Clipboard",
              multiline: false
            };
            
            sb.show(data);
        }
      
        document.getElementById('greeting-form').addEventListener('submit', function(evt) {
        evt.preventDefault();
        var discordHookUrl = evt.target.elements.url.value;
        if (discordHookUrl) {
          discordHookUrl = discordHookUrl.replace("discordapp.com", "skyhook.glitch.me")
          //add the provider
        }
        console.log(discordHookUrl)
        show(snackbar);
    
          window.copyToClipboard(discordHookUrl);
        document.getElementById('greeting').textContent = discordHookUrl;
      });
      
        var MDCFormField = global.mdc.formField.MDCFormField;
        var MDCRadio = global.mdc.radio.MDCRadio;
    
        var formFields = document.querySelectorAll('.mdc-form-field');
        for (var i = 0, formField; formField = formFields[i]; i++) {
          var formFieldInstance = new MDCFormField(formField);
    
          var radio = formField.querySelector('.mdc-radio:not([data-demo-no-js])');
          if (radio) {
            var radioInstance = new MDCRadio(radio);
            formFieldInstance.input = radioInstance;
          }
        }
      })(this);
    
    
  </script>
</html>